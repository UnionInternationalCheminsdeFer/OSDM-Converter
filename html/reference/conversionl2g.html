---
title: Conversion Details 108.1 to 90918-10
permalink: /html/reference/conversion2g.html
hide_hero: true
layout: default
---

<link href="../../assets/css/documentation.css" rel="stylesheet">

<h1>Conversion Details <b>108.1</b> to IRS 90918-10</h1>

<h2>Parameters required for the import of <b>108.1</b> data</h2>

<p>
<table>
	<thead>
		<tr>
			<td>Parameter</td>
			<td>Description</td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<th>Country</th>
			<td>Country used to assign the station codes provided without country in <b>108.1</b></td>
		</tr>
		<tr>
			<th>Character Set</th>
			<td>Character set to read the local characters in <b>108.1</b> station names</td>
		</tr>
		<tr>
			<th>Time zone</th>
			<td>Time zone used to transfer the date fields in <b>108.1</b> into complete date information</td>
		</tr>
	</tbody>
</table>
</p>

<h2>Parameters required for the conversion of <b>108.1</b> data</h2>

<h3>Conversion Parameters</h3>

<p>
<table>
	<thead>
		<tr>
			<td>Parameter</td>
			<td>Description</td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<th>VAT Templates</th>
			<td>Templates to create VAT tax information. Templates can be provided for different scope and countries. The
				template applies to regional constraints within the specified country. Templates with scope INTERNATIONAL are
				used additionally for regional constraints with connection points. Add VAT details for different countries.
			</td>
		</tr>
		<tr>
			<th>Station Mapping</th>
			<td>Mapping of nonstandard stations into real <b>MERITS</b> station codes.</td>
		</tr>
		<tr>
			<th>Fare station set mappings</th>
			<td>Mapping of <b>108.1</b> station codes to fare reference stations. This will be created automatically in case the fare
				reference codes are properly contained in the <b>108.1</b> data.</td>
		</tr>
		<tr>
			<th>Station to service constrained mapping</th>
			<td>Mapping of <b>108.1</b> station codes to service constraints.</td>
		</tr>
		<tr>
			<th>Fare template</th>
			<td>
				<p>
					Template to create a fare in the <b>90918-10</b> data. The template must provide service class and price factor to
					create a fare. All required data for the final fare must be created except the regional validity and the price 
					which come from <b>108.1</b> series and fares.
				</p>
				<p>
					A fixed price can be set, the all fares converted from series will have the same price.<br />
					The referenced data items must be defined in the OSDM fare structure first. They can then be
					assigned to a fare template.
				</p>
			</td>
		</tr>
	</tbody>
</table>
</p>

<h3>Fare Template</h3>

<p>
	Data structures used in the fare template reference data in the final fare structure.
</p>
<p>
<table>
	<thead>
		<tr>
			<td>Content</td>
			<td>Description</td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<th>Price factor</th>
			<td>a factor to calculate the price depending on the price given in the <b>108.1</b> data. The factor is applied and
				the result is rounded to Euro-Cents</td>
		</tr>
		<tr>
			<th>Price</th>
			<td>A fixed price that can be defined manually in the fare structure. If this price is set the price factor will
				not be applied and the series price is replaced by this price.</td>
		</tr>
		<tr>
			<th>Rounding mode</th>
			<td>Rounding rule applied to the price.
				<ul>
					<li> Up: rounding up to one cent</li>
					<li> Down: rounding down to one cent</li>
					<li> Half-Up: rounding up to one cent for 0.5 to 0.9 cents and down for 0.1 to 0.4 cents</li>
					<li> Half-Down: rounding up to one cent for 0.6 to 0.9 cents and down for 0.1 to 0.5 cents</li>
					<li> Half-Even: rounding half up if the left digit is odd, half down otherwise (preserves the mean value)
					</li>
				</ul>
			</td>
		</tr>
		<tr>
			<th>Data description</th>
			<td>Text to name the fare template. This text as no effect on the final data.</td>
		</tr>
		<tr>
			<th>Fare detail description</th>
			<td>A detailed description can be added to the fare. The fare detail description is a text that must to be
				edited in the fare structure first. Then it can be selected in the fare template.</td>
		</tr>
		<tr>
			<th>Fulfillment Constraint</th>
			<td>A fulfillment constraint to be added to the fare. The fulfillment constraint must be edited in the fare
				structure first and can then be selected in the fare template.</td>
		</tr>
		<tr>
			<th>Id</th>
			<td>- not in use - </td>
		</tr>
		<tr>
			<th>Individual contracts</th>
			<td>Indicates whether the fare allows individual contracts (handling tickets and after sales per person) </td>
		</tr>
		<tr>
			<th>Legacy Conversion</th>
			<td>Indicates whether the fare template creates fares that allow a reconversion into <b>108.1</b> data. A fare might
				allow reconversion or even be only included for reconversion. </td>
		</tr>
		<tr>
			<th>Passenger Constraint</th>
			<td>The passenger constraint to be applied with the fare. The passenger constraint must be edited in the fare
				structure first and can then be selected in the fare template. </td>
		</tr>
		<tr>
			<th>Personal data constraint</th>
			<td>The personal data constraint to be applied with the fare. The personal data constraint must be edited in the
				fare structure first and can then be selected in the fare template. </td>
		</tr>
		<tr>
			<th>Reduction Constraint</th>
			<td>The reduction constraint to be applied with the fare. The reduction constraint must be edited in the fare
				structure first and can then be selected in the fare template. </td>
		</tr>
		<tr>
			<th>Regional Constraint</th>
			<td>The regional constraint will be created from the <b>108.1</b> series data.</td>
		</tr>
		<tr>
			<th>Reservation parameter</th>
			<td>The reservation parameter to be applied with the fare. The reservation parameter must be edited in the fare
				structure first and can then be selected in the fare template. </td>
		</tr>
		<tr>
			<th>Sales availability</th>
			<td>The sales availability will be calculated from the validity in the <b>108.1</b> data. </td>
		</tr>
		<tr>
			<th>Separate contract combination constraint</th>
			<td>Combination constraint to be used in case the series is listed in the <b>108.1</b> <b>TCVL</b> file.</td>
		</tr>
		<tr>
			<th>Service class</th>
			<td>The service class to be applied with the fare. The service class must be edited in the fare structure first
				and can then be selected in the fare template. </td>
		</tr>
		<tr>
			<th>Service constraint</th>
			<td>The service constraint to be applied with the fare. The service constraint must be edited in the fare
				structure first and can then be selected in the fare template. </td>
		</tr>
		<tr>
			<th>Service Level</th>
			<td>The service level to be applied with the fare. The service level must be edited in the fare structure first
				and can then be selected in the fare template. </td>
		</tr>
		<tr>
			<th>Text</th>
			<td>The text naming the fare. The text must be edited in the fare structure first and can then be selected in
				the fare template. </td>
		</tr>
		<tr>
			<th>Travel validity</th>
			<td>The travel validity to be applied with the fare. The travel validity must be edited in the fare structure
				first and can then be selected in the fare template. </td>
		</tr>
	</tbody>
</table>
</p>
<p>
	Data structures for after sales rules and legacy accounting identifiers can be added to the fare template via the
	context menu (add child...).
</p>
<p>
	The legacy accounting identifiers are not needed for conversion but can be used to set an tariff id per fare template
	to be used in the accounting. If the accounting identifier is missing the ids will be allocated automatically.
</p>
<p>
	The after sales templates should be added to define after sales rules. The rules can provide a factor to calculate the
	fee depending on the rule. The fee is calculated from the price of the fare multiplied by the fee factor and rounded
	to Euro-Cent.
</p>

<h2>Conversion</h2>

<figure>
	<img src="../images/convertFromLegacy.png" alt="convert" />
	<figcaption>Convert the data.</figcaption>
</figure>

<h3>Conversion has the following steps:</h3>

<ol>
	<li>deleting old conversion results</li>
	<li>creating fare station sets from the fare reference code in the <b>108.1</b> station data</li>
	<li>creating connection points and border point mappings</li>
	<li>updating the station reference data with case sensitive station names and border point codes</li>
	<li>creating sales validity constraints - all from/end dates in series and fares are connected, the set of
		intersections is created. Each intersection results in a sales availability constraint.</li>
	<li>creating carrier constraints for all carriers contained in the series</li>
	<li>conversion of series into fares</li>
</ol>

<h2>Converting a Series</h2>

<p>
	A series is converted into a regional validity and a corresponding regional validity for the return. For each regional
	validity and sales availability and fare template a fare is created using the <b>108.1</b> fare data.
</p>

<h3>	Converting of a series has the following steps:</h3>

<ol>
	<li>converting the series into a regional validity and a second regional validity for the reversed direction.
		<ol>
			<li>identifying the connection points in case of transit series or series from a border point</li>
			<li>replacing stations by real stations, service constraints or fare descriptions using the mappings provided in
				the conversion parameter</li>
			<li>adding the service constraints and fare descriptions to the fare data</li>
			<li>converting the departure station, the via station list and the arrival station into a regional validity.
			</li>
		</ol>
	</li>
	<li>creating the fare based on the fare template.</li>
	<li>calculating the price for each fare template and sales availability constraint.</li>
	<li>adding legacy accounting information to the fare</li>
	<li>adding the price to the fare data set if it is not yet there</li>
	<li>adding the fare to the fare data set</li>
</ol>
